<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive CV - Phạm Văn Thiện</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals: #c7a17a -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fdfdfc;
            color: #1a1a1a;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin-bottom: 3rem;
            height: 450px; /* Fixed height for consistent chart display */
        }
        .nav-link {
            transition: color 0.3s, border-bottom-color 0.3s;
            border-bottom: 2px solid transparent;
            font-weight: 500;
        }
        .nav-link:hover, .nav-link.active {
            color: #c7a17a;
            border-bottom-color: #c7a17a;
        }
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.7);
        }
        /* Custom style to make skill bars indicate interactivity */
        #skillsChart {
            cursor: help;
        }
        /* Custom Keyframes for Phone Shake */
        @keyframes shake-phone {
            0%, 100% { transform: rotate(0deg); }
            10%, 30%, 50%, 70%, 90% { transform: rotate(-20deg); }
            20%, 40%, 60%, 80% { transform: rotate(20deg); }
        }

        .animate-shake {
            animation: shake-phone 1.0s ease-in-out;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Sticky Navigation Header -->
    <header id="header" class="sticky top-0 z-50 bg-white shadow-md">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex justify-between items-center">
                <h1 class="text-xl font-bold text-gray-800">Phạm Văn Thiện, 17+ Years Experience</h1>
                <div class="space-x-8 hidden md:flex">
                    <a href="#overview" class="nav-link active">Overview</a>
                    <a href="#skills" class="nav-link">Skills</a>
                    <a href="#portfolio" class="nav-link">Portfolio</a>
                    <a href="#contact" class="nav-link">Contact</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-10">

        <!-- OVERVIEW Section -->
        <section id="overview" class="pt-8 mb-16">
            <h2 class="text-3xl font-bold mb-6 text-gray-900">Professional Overview</h2>
            <div class="grid md:grid-cols-3 gap-8 mb-8">
                <div class="md:col-span-2">
                    <p class="text-lg text-gray-700 mb-6">
                        A highly experienced and versatile <b>Senior Software Engineer</b> with over <b>17 years</b> of professional experience, specializing in <b>iOS Development</b>, <b>C/C++ Systems</b>, and <b>Cross-Platform Architecture</b>. Proven history of delivering complex mobile applications, enterprise solutions, and leading development teams.
                    </p>
                    <ul class="space-y-3 text-gray-600 list-disc pl-5">
                        <li><b>Core Mobile Expertise:</b> 10+ years focused on iOS development, mastering Objective-C and modern Swift practices.</li>
                        <li><b>Systems Integration:</b> Deep knowledge of low-level programming (C/C++) used for HTS apps, back-up solutions, and EDI programs.</li>
                        <li><b>Architectural Leadership:</b> Proven ability to manage teams and design robust, cross-platform architecture for web services, Windows services, and mobile applications (AP LINK).</li>
                        <li><b>Automation Advocate:</b> Developed and applied iOS UI Automation Test frameworks across multiple organizations (DXC, Cisbox).</li>
                    </ul>
                </div>
                
                <!-- START OF REVISED PERSONAL & CONTACT BLOCK -->
                <div class="md:col-span-1 bg-gray-50 p-6 rounded-xl shadow-lg flex flex-col items-center">
                    <!-- Avatar Image: Using the uploaded file my_avatar.jpg -->
                    <img src="my_avatar.jpg"
                         alt="Phạm Văn Thiện Avatar"
                         class="rounded-full w-24 h-24 mb-4 object-cover border-4 border-white shadow-md"
                         onerror="this.onerror=null; this.src='https://placehold.co/120x120/c7a17a/ffffff?text=PVT';">
                    
                    <h3 class="font-semibold text-xl mb-6 text-gray-900">Education & Contact</h3>
                    
                    <!-- EDUCATION BLOCK -->
                    <div class="w-full mb-6 p-4 bg-white rounded-lg border border-gray-100">
                        <div class="flex items-center space-x-2 text-gray-800 mb-2">
                             <!-- Icon for Graduation Cap -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#c7a17a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M12 22V15"/><path d="M15 4.1L22 8l-7 4-7-4z"/></svg>
                            <span class="font-bold text-sm uppercase tracking-wider">Education</span>
                        </div>
                        <p class="text-sm text-gray-700 leading-relaxed">
                            <b>Bachelor of Science (B.Sc.)</b> in <br/>
                            University of Natural Sciences, VNU-HCM.
                            <br/><span class="text-xs text-gray-500 font-medium">(Graduation Rank: Very Good)</span>
                        </p>
                    </div>

                    <!-- CONTACT BLOCK -->
                    <div class="w-full space-y-3 text-sm">
                        
                        <div class="flex items-center space-x-3">
                            <!-- Icon for Mail -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#c7a17a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
                            <a href="mailto:vanthien1986@gmail.com" class="text-gray-700 hover:text-[#c7a17a] hover:underline break-all">vanthien1986@gmail.com</a>
                        </div>
                        
                        <div class="flex items-center space-x-3">
                            <!-- Phone Number (UPDATED: Clickable and Animated) -->
                            <a href="tel:+84906411561" class="flex items-center space-x-3 group hover:text-[#c7a17a] transition duration-300">
                                <!-- Icon for Phone - Added ID for JS targeting -->
                                <svg id="phone-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#c7a17a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0 group-hover:scale-105 transition duration-300"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
                                <span class="text-gray-700 group-hover:text-[#c7a17a] transition duration-300">+84 906 411 561</span>
                            </a>
                        </div>
                        
                        <!-- Optionally add LinkedIn or other professional link -->
                        <div class="flex items-center space-x-3">
                             <!-- Icon for User (Placeholder for Contact/Profile Link) -->
                             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#c7a17a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                            <span class="text-gray-700">Vietnam, Ho Chi Minh City</span>
                        </div>
                    </div>
                </div>
                <!-- END OF REVISED PERSONAL & CONTACT BLOCK -->
            </div>
            
            <h3 class="text-2xl font-bold mb-4 text-gray-800 border-b pb-2">Career Timeline</h3>
            <!-- Updated instruction for clarity -->
            <p class="text-sm text-gray-600 mb-4">Click <b>any bar</b> or <b> the company name label</b> for details on duties and achievements for that role.</p>
            <div class="chart-container">
                <canvas id="experienceChart"></canvas>
            </div>
        </section>

        <hr class="my-10 border-gray-200">

        <!-- SKILLS Section -->
        <section id="skills" class="pt-8 mb-16">
            <h2 class="text-3xl font-bold mb-6 text-gray-900">Technical Skills</h2>
            <div class="grid md:grid-cols-2 gap-10">
                <div>
                    <h3 class="text-2xl font-bold mb-4 text-gray-800 border-b pb-2">Technical Core Competencies</h3>
                    <p class="text-sm text-gray-600 mb-4">The horizontal bar chart clearly highlights my primary areas of expertise based on the duration and depth of professional use. <b>Hover over a bar for a detailed description.</b></p>
                    <div class="chart-container h-72">
                        <canvas id="skillsChart"></canvas>
                    </div>
                </div>
                <div>
                    <h3 class="text-2xl font-bold mb-4 text-gray-800 border-b pb-2">Tools & Frameworks</h3>
                    
                    <div class="mb-6">
                        <h4 class="font-semibold text-lg text-[#c7a17a] mb-2">Primary Languages & Platforms</h4>
                        <table class="w-full text-sm text-left text-gray-500">
                            <tbody class="divide-y divide-gray-200">
                                <tr><th class="py-2 font-medium text-gray-900">Mobile</th><td>iOS (Objective-C, Swift), Cocoa Touch, Android (Prior)</td></tr>
                                <tr><th class="py-2 font-medium text-gray-900">Systems</th><td>C/C++, C# (for .NET/Windows Service)</td></tr>
                                <tr><th class="py-2 font-medium text-gray-900">Web/Backend</th><td>PHP, Java, Python (Django), Ruby (Rails), .NET Framework</td></tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="mb-6">
                        <h4 class="font-semibold text-lg text-[#c7a17a] mb-2">Database & Storage</h4>
                        <p class="text-gray-600">SQLite, MySQL, Oracle, Realm, Core Data (built custom data module equivalent).</p>
                    </div>
                    
                    <div class="mb-6">
                        <h4 class="font-semibold text-lg text-[#c7a17a] mb-2">Testing & DevOps</h4>
                        <p class="text-gray-600">iOS UI Automation Test framework, RSpect, Cucumber, Git/Version Control, Testing Methodologies (TMA).</p>
                    </div>
                </div>
            </div>
        </section>

        <hr class="my-10 border-gray-200">

        <!-- PORTFOLIO Section -->
        <section id="portfolio" class="pt-8 mb-16">
            <h2 class="text-3xl font-bold mb-6 text-gray-900">Selected Project Portfolio</h2>
            
            <!-- Filters -->
            <div class="flex flex-wrap gap-2 mb-6" id="portfolio-filters">
                <!-- UPDATED COUNT: 9 existing + 5 new = 14 projects total -->
                <button data-filter="all" class="filter-btn px-4 py-2 text-sm rounded-full transition-colors bg-[#c7a17a] text-white">All (14)</button>
                <!-- UPDATED COUNT: (11 - 1) = 10 iOS projects (Project 12 changed from iOS to Web/Python) -->
                <button data-filter="iOS" class="filter-btn px-4 py-2 text-sm rounded-full transition-colors bg-white text-gray-700 border border-gray-300 hover:border-[#c7a17a]">iOS (10)</button>
                <!-- UNCHANGED COUNT: 3 C/C++ projects -->
                <button data-filter="C/C++" class="filter-btn px-4 py-2 text-sm rounded-full transition-colors bg-white text-gray-700 border border-gray-300 hover:border-[#c7a17a]">C/C++ Systems (3)</button>
                <!-- UPDATED COUNT: 3 existing Web + 1 newly tagged Web = 4 Web projects -->
                <button data-filter="Web" class="filter-btn px-4 py-2 text-sm rounded-full transition-colors bg-white text-gray-700 border border-gray-300 hover:border-[#c7a17a]">Web (4)</button>
                <!-- UNCHANGED COUNT: 1 Automation project -->
                <button data-filter="Automation" class="filter-btn px-4 py-2 text-sm rounded-full transition-colors bg-white text-gray-700 border border-gray-300 hover:border-[#c7a17a]">Automation (1)</button>
            </div>
            
            <!-- Portfolio Grid -->
            <div id="portfolio-grid" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Cards will be injected here by JavaScript -->
            </div>
        </section>

        <hr class="my-10 border-gray-200">

        <!-- CONTACT Section -->
        <section id="contact" class="pt-8 mb-16 text-center">
            <h2 class="text-3xl font-bold mb-4 text-gray-900">Ready to Discuss?</h2>
            <p class="text-lg text-gray-600 mb-6">Contact me directly to explore how my 17 years of experience can contribute to your team's success.</p>
            <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
                <!-- Email Button -->
                <a href="mailto:vanthien1986@gmail.com" class="inline-block px-8 py-3 text-lg font-semibold text-white bg-[#c7a17a] rounded-lg shadow-lg hover:bg-[#a68261] transition-colors">
                    Email Phạm Văn Thiện
                </a>
                <!-- Phone/Zalo Contact Button -->
                <a href="tel:+84906411561" class="inline-flex items-center space-x-2 px-6 py-3 text-lg font-semibold text-[#c7a17a] border-2 border-[#c7a17a] bg-white rounded-lg shadow-lg hover:bg-gray-50 transition-colors">
                    <!-- Phone Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
                    <!-- Chat/Zalo Icon (using a standard speech bubble) -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                    <span>Call / Zalo (+84 906 411 561)</span>
                </a>
            </div>
        </section>

    </main>
    
    <!-- Modal for Detail View -->
    <div id="detail-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center p-4 modal-overlay">
        <div class="bg-white rounded-lg shadow-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto transform transition-all scale-100">
            <div class="flex justify-between items-start border-b pb-3 mb-4">
                <h3 id="modal-title" class="text-2xl font-bold text-gray-800"></h3>
                <button onclick="document.getElementById('detail-modal').classList.add('hidden')" class="text-gray-400 hover:text-gray-700 text-3xl leading-none">&times;</button>
            </div>
            <div id="modal-content" class="text-gray-600 space-y-4">
                <!-- Content injected here -->
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            // --- CHART CONSISTENCY & LABELING ---
            Chart.defaults.font.family = "'Inter', sans-serif";
            Chart.defaults.font.weight = '500';

            // --- DATA STRUCTURES ---

            // Experience data for Career Timeline Chart
            const detailedExperience = [
                { id: 0, company: 'Daoukiwoom Innovation', position: 'HTS developer', duration: '7/2023 to 7/2025 (24 months)', achievements: [
                    'Using Microsoft Visual Studio 2012 to develop C++ to build up Stock and Exchange app for Windows.',
                    'Fix bug and build new features to release windows app. Link to download HTS app: https://www.kiwoom.co.id/trading/getHTSMain'
                ]},
                { id: 1, company: 'Cisbox Ltd.', position: 'iOS developer', duration: '3/2020 to 6/2023 (39 months)', achievements: [
                    'Develop iOS app for Accounting.',
                    'Develop framework of iOS UI automation test.',
                    'Delivery the app successfully. Links: https://apps.apple.com/vn/app/cisbox-invoice/id1354358184, https://apps.apple.com/vn/app/cisbox-order/id1454790295'
                ]},
                { id: 2, company: 'DXC Technology', position: 'iOS developer', duration: '10/2017 to 3/2020 (29 months)', achievements: [
                    'Develop iOS app to track user ‘s step via Apple watch.',
                    'Develop iOS app to scan QR code.',
                    'Develop framework of iOS UI automation test.',
                    'Delivery the app successfully and support customer when new iOS version release.',
                    'Apply framework of iOS UI automation test to multiple iOS apps.'
                ]},
                { id: 3, company: '  Dispatching Solutions, inc (DSi)', position: 'iOS developer', duration: '3/2017 to 9/2017 (6 months)', achievements: [
                    'Develop iOS app to send, read and write log bluetooth message.',
                    'Develop an app to keep track truck ‘s activity via bluetooth device: Atrack and Squarell.',
                    'Upgrade bluetooth firmware over the air.'
                ]},
                { id: 4, company: 'EdgeWorks', position: 'iOS developer', duration: '12/2015 to 3/2017 (15 months)', achievements: [
                    'Develop and delivery successfully app RealEstateTube.',
                    'Develop and delivery successfully Piano Party game in MindMate app.',
                    'Develop and delivery successfully app Liive.'
                ]},
                { id: 5, company: 'PINE TECH', position: 'iOS developer', duration: '3/2015 to 12/2015 (9 months)', achievements: [
                    'Develop apps: HTV Online, The Voice, The Voice kids, Buoc Nhay Hoan Vu Nhi, Sabotage.',
                    'Experience to develop entertainment app.'
                ]},
                { id: 6, company: 'AP LINK', position: 'Team leader', duration: '10/2012 to 2/2015 (28 months)', achievements: [
                    'Manage the team of 5 members.',
                    'Analyze the requirement. Design architecture for multiple platforms: web portal, web service, windows service, mobile application (Android, iOS).',
                    'Solo development, built the MVC framework for iOS from scratch (UITextField, UIButton, UITabBar, UINavigationController, MapKit, Barcode scanner, Camera capture, custom Gallery/ScrollView control, SQLite data module).',
                    'Understand and implement whole architecture of marketing solution.'
                ]},
                { id: 7, company: 'Sunrise Software Solution', position: 'Developer', duration: '7/2011 to 10/2012 (15 months)', achievements: [
                    'Develop C++ project: back-up and restore hard disk on LAN (HTTP and HTTPS).',
                    'iPhone application: mobile map- search location base on Google map.'
                ]},
                { id: 8, company: 'CODIX', position: 'Team leader', duration: '7/2010 to 7/2011 (12 months)', achievements: [
                    'Manage the team of 3 members.',
                    'Complete 100% 3 interfaces with C++ and 1 interface with ProC to link software modules in IMX system.',
                    'Good knowledge of Oracle, C/C++, Java with Spring framework.',
                    'Worked in Europe for 3 months.'
                ]},
                { id: 9, company: 'GATe Technology', position: 'Engineer', duration: '12/2009 to 7/2010 (7 months)', achievements: [
                    'Develop Web application.',
                    'Complete successfully 100% 1 web applications with C standard (Web server: lighttpd, Framework: FastCGI).'
                ]},
                { id: 10, company: 'B2BE Solution', position: 'Engineer', duration: '10/2008 to 12/2009 (14 months)', achievements: [
                    'Develop Web application: with PHP, YUI, MySQL, AJAX.',
                    'Develop EDI with C++.',
                    'Complete successfully 100% 2 web applications and many EDI programs.'
                ]},
                { id: 11, company: 'TMA Solution', position: 'Engineer', duration: '6/2008 to 8/2008 (2 months)', achievements: [
                    'Testing telecommunication hardware (Nortel).',
                    'Trained about TCP/IP and Testing method.'
                ]},
            ].sort((a, b) => b.id - a.id); // Reverse order for correct chart display (oldest at bottom)
            
            // --- PHONE SHAKE ANIMATION (New Feature) ---
            const phoneIcon = document.getElementById('phone-icon');
            const phoneObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Start shaking when in view
                        entry.target.classList.add('animate-shake');
                    } else {
                        // Stop shaking when out of view (optional, but clean)
                        entry.target.classList.remove('animate-shake');
                    }
                });
            }, {
                root: null,
                rootMargin: '0px',
                threshold: 0.5 // Trigger when 50% of the element is visible
            });

            if (phoneIcon) {
                phoneObserver.observe(phoneIcon);
            }

            // Project/Demo Data for Portfolio Section - UPDATED WITH imageFile
            const portfolioData = [
                // 0-8: Existing Projects
                { index: 0, title: 'iOS UI Automation Test framework', description: 'Developed a robust framework for UI automation testing, significantly improving QA efficiency.', company: 'Cisbox/DXC', duration: '18 months', tags: ['iOS', 'Automation', 'Framework'], detail: { link: 'https://www.linkedin.com/pulse/demo-ios-ui-automation-test-thien-pham/', highlights: ['Scroll to the cell index of UICollectionView that has been defined in configuration file.'] } },
                { index: 1, title: 'Liive App', description: 'Video streaming application focused on flawless playback even on low bandwidth/unstable networks.', company: 'EdgeWorks', duration: '6 months', tags: ['iOS', 'Streaming'], detail: { link: 'https://www.linkedin.com/pulse/app-liive-thien-pham?trk=mp-reader-card', highlights: ['Watch video flawlessly in low internet bandwidth or unstable.', 'Fuzzy search help user find the correct place with typo.'] } },
                { index: 2, title: 'RealEstate Tube', description: 'Mobile video platform for real estate, featuring video joining, live streaming, and chatting.', company: 'EdgeWorks', duration: '6 months', tags: ['iOS', 'Streaming', 'Chat'], imageFile: 'RealEstate Tube.jpg', detail: { link: 'https://itunes.apple.com/us/app/realestatetube/id966062802?mt=8', highlights: ['Join multiple videos into 1 video with theme music.', 'Live streaming.', 'Chatting.'] } },
                { index: 3, title: 'OCR Handwriting with MediaPipe',
                  description: 'A cutting-edge proof-of-concept using MediaPipe to capture and convert <b>real-time finger gestures (handwriting)</b> into an image for instant recognition of <b>text</b> via Optical Character Recognition (OCR).',
                  company: 'Personal/Demo', duration: '2 months', tags: ['iOS', 'MediaPipe', 'Demo'], detail: { link: 'https://www.youtube.com/watch?v=Hnng4ymm_6k', highlights: ['Converted finger position into pixels matrix.', 'Converted pixels matrix to image for OCR.'] } },
                { index: 4, title: 'Enterprise Marketing Platform Architecture', description: 'Design and solo development of a large-scale marketing product spanning web portal, web service, Windows service, Android, and iOS.', company: 'AP LINK', duration: '20 months', tags: ['Architecture', 'C/C++', 'Web', 'iOS'], detail: { link: null, highlights: ['Designed architecture for multiple platforms.', 'Built MVC framework for iOS from scratch.', 'Implemented custom controls: MapKit, Gallery (UIScrollView), Barcode/Camera modules.'] } },
                { index: 5, title: 'Disk Imaging Service (LAN)', description: 'C++ service to restore and backup hard disk on LAN using HTTP, HTTPS, FPT, and FPTS protocols.', company: 'Sunrise Software Solution', duration: '6 months', tags: ['C/C++', 'Systems', 'Networking'], detail: { link: null, highlights: ['Developed client/server service in C++ to handle backup/restore via HTTP/HTTPS.', 'Focus on reliable system utility development.'] } },
                { index: 6, title: 'Mobile Map (iPhone)', description: 'Search and navigation app built on Google Maps, prioritizing results based on user votes.', company: 'Sunrise Software Solution', duration: '6 months', tags: ['iOS', 'Objective-C', 'Map'], detail: { link: null, highlights: ['Built GUI and all map functions (navigation, zoom).', 'Implemented a location search and priority voting system.'] } },
                { index: 7, title: 'Bookmark URL Site', description: 'Freelance project using Ruby on Rails to build a social bookmarking and URL sharing website.', company: 'Freelancer', duration: '3 months', tags: ['Web', 'Ruby', 'Rails'], detail: { link: null, highlights: ['Created database and tested with RSpect/Cucumber.', 'Developed import function from delicious.com and full CRUD for bookmarks/tags.'] } },
                { index: 8, title: 'Access Card System (Web/C)', description: 'System for card-based door entry, developing the web application side (authentication, user management) using C standard.', company: 'GATe Technology', duration: '7 months', tags: ['Web', 'C'], detail: { link: null, highlights: ['Developed the web application server-side using C standard.', 'Framework: FastCGI, Web server: Lighttpd.'] } },
                
                // 9-11: Other existing projects - UPDATED WITH imageFile
                { index: 9, title: 'Piano Party Game (in MindMate)', description: 'Developed the "Piano Party" game feature integrated within the MindMate application.', company: 'EdgeWorks', duration: '2 months', tags: ['iOS', 'Game'], imageFile: 'Piano Party.jpg', detail: { link: null, highlights: ['Integrated game feature into existing iOS app.', 'Focus on smooth gameplay and UI/UX.'] } },
                { index: 10, title: 'HTV Online App', description: 'Development of the official streaming and video-on-demand application for Ho Chi Minh City Television (HTV).', company: 'PINE TECH', duration: '3 months', tags: ['iOS', 'Streaming'], imageFile: 'HTV Online.jpg', detail: { link: null, highlights: ['Handled integration of VOD content and live streaming feeds.', 'Optimized for high traffic and entertainment user experience.'] } },
                { index: 11, title: 'Entertainment TV Show Apps (Buoc Nhay Hoan Vu Nhi)', description: 'Created interactive mobile companion apps for various popular entertainment shows (The Voice, The Voice Kids, Buoc Nhay Hoan Vu Nhi, Sabotage).', company: 'PINE TECH', duration: '3 months', tags: ['iOS', 'Entertainment'], imageFile: 'Buoc Nhay Hoan Vu Nhi.jpg', detail: { link: null, highlights: ['Developed features for voting, news, and video clips related to the shows.'] } },
                
                // 12: Modified Project
                { index: 12, title: 'Netconference Management Tool (Web)', description: 'A management web tool for the Netconference application, specifically designed for <b>team management and cooperation</b>. It handles user accounts, collaboration settings, and configuration using <b>Python</b> and <b>Django</b>.', company: 'Sunrise Software Solution', duration: '8 months', tags: ['Web', 'Python', 'Django'], detail: { link: 'http://www.netconference.com/', highlights: ['Developed the full-stack web application using Python/Django.', 'Implemented user authentication and data management for the platform.', 'Designed and managed the PostgreSQL/MySQL database for user records and activity logs.'] } },
                
                { index: 13, title: 'Cocos2d-x Game Development', description: 'Developed two game applications using the Cocos2d-x framework, utilizing C++ and Lua for cross-platform logic.', company: 'PINE TECH', duration: '3 months', tags: ['iOS', 'Game', 'C/C++'], detail: { link: null, highlights: ['Built 2 game apps using the Cocos2d-x engine.', 'Programmed game logic using C++ and Lua.'] } },
            ];

            // Skills data for Radar Chart
            const skillsData = {
                // Modified labels for better fit on narrow screens:
                labels: [
                    ['iOS', 'Dev'], // Index 0
                    ['C/C++', 'Systems'], // Index 1
                    ['Web', 'Dev'], // Index 2
                    [' Architecture', 'Design'], // Index 3
                    ['Team', 'Leadership'], // Index 4
                    ['Test', 'Automation'] // Index 5
                ],
                datasets: [{
                    label: 'Professional Focus (High=10)',
                    data: [10, 10, 8.5, 9.0, 9.5, 10], // Scores based on depth of professional use
                    backgroundColor: 'rgba(199, 161, 122, 0.7)', // #c7a17a with alpha
                    borderColor: '#c7a17a',
                    borderWidth: 2,
                    pointBackgroundColor: '#c7a17a'
                }]
            };

            // New skill descriptions mapped to their index in the skillsData array
            const skillDescriptions = [
                "10+ years focused on Objective-C and Swift. Built custom MVC frameworks, developed complex apps (Streaming, Enterprise), and integrated advanced features like MediaPipe and custom Bluetooth handling.", // iOS Dev
                "Deep low-level knowledge in C/C++, delivering projects like HTS (Stock Trading) apps for Windows, Disk Imaging services (backup/restore), and EDI program interfaces for IMX systems. Experienced with C++ in Windows and Linux environments.", // C/C++ Systems
                "Experienced in full-stack web development using PHP, Ruby on Rails, Java (Spring), .NET, and C standard (FastCGI) for portals, services, and web applications.", // Web Dev
                "Led the architecture design for a large-scale cross-platform marketing solution (Web, Windows Service, Mobile). Also built a comprehensive MVC framework for iOS from scratch.", // Architecture Design
                "Managed teams of 3-5 members, overseeing requirement analysis, architecture design, and project completion, including a 3-month on-site assignment in Europe.", // Team Leadership
                "Developed and implemented robust iOS UI Automation Test frameworks across multiple organizations (Cisbox, DXC), significantly improving QA efficiency and release cycles." // Test Automation
            ];


            // --- CHART INITIALIZATION ---

            // Career Timeline Chart
            const experienceCtx = document.getElementById('experienceChart').getContext('2d');
            const experienceData = {
                labels: detailedExperience.map(item => {
                    // MODIFIED: Return only the company name to remove the duration line
                    return item.company;
                }),
                datasets: [{
                    label: 'Duration in Months',
                    data: detailedExperience.map(item => {
                        const durationMatch = item.duration.match(/\((\d+) months\)/);
                        return durationMatch ? parseInt(durationMatch[1]) : 0;
                    }),
                    backgroundColor: '#c7a17a',
                }]
            };

            const experienceChart = new Chart(experienceCtx, {
                type: 'bar',
                data: experienceData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    // This onHover function makes the cursor a pointer when hovering over a clickable bar
                    onHover: (event, elements) => {
                        event.native.target.style.cursor = elements.length > 0 ? 'pointer' : 'default';
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: { display: true, text: 'Duration (Months)' }
                        },
                        y: {
                            title: { display: false },
                            ticks: {
                                // Increased font size slightly and made the company name bold
                                font: {
                                    size: 13,
                                    weight: 'bold'
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: { callbacks: { label: (context) => `Duration: ${context.parsed.x} months` } }
                    },
                    // This onClick function handles the 'hyperlink' action by opening the detail modal
                    onClick: (event, elements) => {
                        if (elements.length > 0) {
                            const index = elements[0].index;
                            const experienceIndex = detailedExperience.length - 1 - index; // Correct for reverse order
                            showExperienceDetailModal(experienceIndex);
                        }
                    }
                }
            });

            // NEW CLICK HANDLER FOR Y-AXIS LABELS (Company Names)
            document.getElementById('experienceChart').addEventListener('click', function(event) {
                // Get the coordinates of the click within the chart area
                const rect = event.target.getBoundingClientRect();
                const x = event.clientX - rect.left;
                const y = event.clientY - rect.top;

                // Check if the click is within the Y-axis area (where labels are)
                const yAxis = experienceChart.scales.y;
                const xAxis = experienceChart.scales.x;
                
                // Estimate the area of the Y-axis labels: from the start of the canvas to the start of the X-axis (before the bars begin)
                if (x < xAxis.left && y > yAxis.top && y < yAxis.bottom) {
                    const ticks = yAxis.getTicks();
                    
                    // Determine which label was clicked based on the Y coordinate
                    for (let i = 0; i < ticks.length; i++) {
                        // Calculate the center Y position for the current tick label
                        const tickY = yAxis.getPixelForTick(i);
                        
                        // Assuming a label height of about 20-25 pixels
                        const labelHeight = 22;
                        
                        // Check if the click Y is close to the tick's Y center
                        if (y >= tickY - labelHeight / 2 && y <= tickY + labelHeight / 2) {
                            // Found the clicked label. Now find the correct index for the detailedExperience array.
                            // Chart.js plots data in reverse order of the detailedExperience array.
                            const experienceIndex = detailedExperience.length - 1 - i;
                            
                            // Prevent double triggering if the click also registered on a bar
                            const elements = experienceChart.getElementsAtEventForMode(event, 'point', { intersect: true }, true);
                            if (elements.length === 0) {
                                showExperienceDetailModal(experienceIndex);
                            }
                            break; // Stop after handling the click
                        }
                    }
                }
            });

            // Skills Horizontal Bar Chart - UPDATED TOOLTIP
            const skillsCtx = document.getElementById('skillsChart').getContext('2d');
            const skillsChart = new Chart(skillsCtx, {
                type: 'bar',
                data: skillsData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 10,
                            ticks: { stepSize: 2 },
                            title: { display: true, text: 'Competency Score (out of 10)' }
                        },
                        y: {
                            grid: { display: false },
                            ticks: {
                                font: {
                                    size: 11,
                                    weight: '500'
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                             // Custom tooltip configuration
                             callbacks: {
                                // Use the title callback to display the detailed skill description
                                title: (tooltipItems) => {
                                    const index = tooltipItems[0].dataIndex;
                                    const skillName = skillsData.labels[index].join(' '); // Reconstruct the skill name
                                    return `${skillName}\n\nSummary:`;
                                },
                                // Use the label callback to display the score separately
                                label: (context) => {
                                    const score = context.parsed.x;
                                    return `Score: ${score}/10`;
                                },
                                // Use the afterBody callback to inject the long description
                                afterBody: (tooltipItems) => {
                                    const index = tooltipItems[0].dataIndex;
                                    // Split the description into multiple lines for better display in the tooltip
                                    const description = skillDescriptions[index];
                                    return description.match(/.{1,40}(\s|$)/g); // Wrap text every ~40 characters
                                },
                                // Remove the color box for the summary text
                                labelColor: (context) => {
                                    return {
                                        borderColor: 'transparent',
                                        backgroundColor: 'transparent'
                                    };
                                }
                             }
                        }
                    }
                }
            });


            // --- MODAL LOGIC ---

            const modal = document.getElementById('detail-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalContent = document.getElementById('modal-content');
            
            // Function to automatically convert URLs in text to clickable links
            function linkify(text) {
                // Regex to find http(s):// or ftp:// URLs
                const urlRegex = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
                return text.replace(urlRegex, function(url) {
                    return '<a href="' + url + '" target="_blank" class="text-blue-500 hover:underline font-medium break-all">' + url + '</a>';
                });
            }


            function showExperienceDetailModal(index) {
                const item = detailedExperience.find(d => d.id === index);
                if (!item) return;

                modalTitle.textContent = `${item.company} - ${item.position}`;
                
                // Use linkify when generating the achievement list items
                const achievementsHtml = item.achievements.map(a => `<li>${linkify(a)}</li>`).join('');

                modalContent.innerHTML = `
                    <p class="font-semibold text-lg text-[#c7a17a] mb-2">${item.duration}</p>
                    <p class="font-bold text-gray-800">Duties & Achievements:</p>
                    <ul class="list-disc pl-5 space-y-2">
                        ${achievementsHtml}
                    </ul>
                `;
                modal.classList.remove('hidden');
            }

            // UPDATED: Function to show project detail modal with image support
            function showProjectDetailModal(index) {
                const item = portfolioData.find(d => d.index === index);
                if (!item) return;

                modalTitle.textContent = item.title;
                const linkHtml = item.detail.link
                    ? `<a href="${item.detail.link}" target="_blank" class="text-blue-500 hover:underline break-all">${item.detail.link}</a>`
                    : '<span class="text-gray-500">No public link available.</span>';

                let imageHtml = '';
                // Check if the item has a specified image file
                if (item.imageFile) {
                    imageHtml = `
                        <div class="pt-4 border-t mt-4 border-gray-100">
                            <h4 class="font-bold text-gray-800 mb-2">Visual Reference:</h4>
                            <img src="${item.imageFile}" 
                                 alt="${item.title} Screenshot" 
                                 class="w-full h-auto rounded-lg shadow-xl mb-6 object-contain max-h-96 mx-auto border border-gray-200"
                                 onerror="this.onerror=null; this.src='https://placehold.co/400x225/e0e0e0/555555?text=Image+Not+Found';"
                            />
                        </div>
                    `;
                }


                modalContent.innerHTML = `
                    <p class="text-sm text-gray-500 mb-4">${item.company} | ${item.duration}</p>
                    <p class="mb-4">${item.description}</p>
                    <p class="font-bold text-gray-800">Highlights:</p>
                    <ul class="list-disc pl-5 space-y-2 mb-4">
                        ${item.detail.highlights.map(h => `<li>${h}</li>`).join('')}
                    </ul>
                    <p class="font-bold text-gray-800">Link/Demo:</p>
                    ${linkHtml}
                    ${imageHtml}
                `;
                modal.classList.remove('hidden');
            }

            // Close modal when clicking outside
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.add('hidden');
                }
            });

            // --- NAVIGATION & SCROLL LOGIC ---

            const navLinks = document.querySelectorAll('.nav-link');
            const sections = ['overview', 'skills', 'portfolio', 'contact'].map(id => document.getElementById(id));

            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.5 // Trigger when 50% of the section is visible
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => link.classList.remove('active'));
                        const activeLink = document.querySelector(`.nav-link[href="#${entry.target.id}"]`);
                        if (activeLink) {
                            activeLink.classList.add('active');
                        }
                    }
                });
            }, observerOptions);

            sections.forEach(section => observer.observe(section));


            // --- PORTFOLIO FILTERING AND SORTING LOGIC (UPDATED) ---

            const portfolioGrid = document.getElementById('portfolio-grid');
            const filterButtons = document.querySelectorAll('.filter-btn');
            const SPECIAL_PROJECT_TITLE = 'OCR Handwriting with MediaPipe';

            const renderPortfolio = (filter) => {
                portfolioGrid.innerHTML = '';
                
                let filteredData = filter === 'all'
                    ? portfolioData
                    : portfolioData.filter(item => item.tags.includes(filter));

                // Custom Sorting Logic: Move the special project to the front
                const specialProjectIndex = filteredData.findIndex(item => item.title === SPECIAL_PROJECT_TITLE);
                
                if (specialProjectIndex > -1) {
                    const specialProject = filteredData.splice(specialProjectIndex, 1)[0];
                    filteredData.unshift(specialProject); // Place it at the start
                }


                filteredData.forEach((item, index) => {
                    const card = document.createElement('div');
                    
                    // Logic to highlight the specific project card
                    let cardClasses = 'flex flex-col rounded-lg shadow-sm p-6 cursor-pointer hover:shadow-lg transition-shadow duration-300';

                    if (item.title === SPECIAL_PROJECT_TITLE) {
                        // Highlighted style: light amber background, border-2 border-[#c7a17a], subtle scaling transform
                        cardClasses += ' bg-amber-100 border-2 border-[#c7a17a] shadow-md transform scale-[1.02]';
                    } else {
                        // Default style
                        cardClasses += ' bg-white border border-gray-200';
                    }
                    
                    card.className = cardClasses;
                    
                    card.dataset.index = item.index; // Use original index for modal lookup
                    
                    // Create Tags HTML
                    const tagsHTML = item.tags.map(tag =>
                        `<span class="inline-block bg-gray-100 text-gray-700 text-xs px-3 py-1 rounded-full font-medium mt-1 mr-1">${tag}</span>`
                    ).join('');

                    card.innerHTML = `
                        <h4 class="font-bold text-lg text-gray-800 mb-2">${item.title}</h4>
                        <p class="text-gray-600 mb-4 text-sm">${item.description}</p>
                        <div class="mt-auto pt-4 border-t border-gray-100">
                           ${tagsHTML}
                        </div>
                    `;
                    
                    // Add click listener to show modal
                    card.addEventListener('click', function() {
                        const projectIndex = parseInt(this.dataset.index);
                        showProjectDetailModal(projectIndex);
                    });
                    
                    portfolioGrid.appendChild(card);
                });
            };

            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const filter = button.dataset.filter;
                    filterButtons.forEach(btn => {
                        btn.classList.remove('bg-[#c7a17a]', 'text-white');
                        btn.classList.add('bg-white', 'text-gray-700', 'border', 'border-gray-300', 'hover:border-[#c7a17a]');
                    });
                    button.classList.add('bg-[#c7a17a]', 'text-white');
                    button.classList.remove('bg-white', 'text-gray-700', 'border', 'border-gray-300', 'hover:border-[#c7a17a]');
                    renderPortfolio(filter);
                });
            });

            renderPortfolio('all');
        });
    </script>
</body>
</html>
